The Oath of Allegiance of the United States is the official oath of allegiance that must be taken and subscribed by every immigrant who wishes to become a United States citizen. 
The oath may be administered by any immigration judge or any authorized officer of the United States Citizenship and Immigration Services (USCIS), including by any eligible federal judge.

Text
The current Oath of Allegiance for naturalization as a citizen of the United States is as follows:

I hereby declare, on oath, that I absolutely and entirely renounce and abjure all allegiance and fidelity to any foreign prince, potentate, state, or sovereignty of whom or which I have heretofore been a subject or citizen; that I will support and defend the Constitution and laws of the United States of America against all enemies, foreign and domestic; that I will bear true faith and allegiance to the same; that I will bear arms on behalf of the United States when required by the law; that I will perform noncombatant service in the Armed Forces of the United States when required by the law; that I will perform work of national importance under civilian direction when required by the law; and that I take this obligation freely without any mental reservation or purpose of evasion; so help me God.

Modifications
According to U.S. regulations, the phrase "so help me God" is optional and that the words on oath can be substituted with and solemnly affirm.
According to U.S. Congress, if the prospective citizen is unable or unwilling to promise to bear arms or perform noncombatant military service because of "religious training and belief", he or she may request to leave out those clauses. The law specifies:

The term "religious training and belief" as used in this section shall mean an individual's belief in a relation to a Supreme Being involving duties superior to those arising from any human relation, but does not include essentially political, sociological, or philosophical views, or a merely personal moral code.
Qualifying for this modification may require supporting documentation from the applicant's religious organization. The applicant is not required to belong to a specific religious group, but must have "a sincere and meaningful belief that has a place in the applicant's life that is equivalent to that of a religious belief."

Renunciation of title or order of nobility
New citizens who hold foreign titles must also renounce those titles by adding the following phrase:I further renounce the title of (give title or titles) which I have heretofore held; or I further renounce the order of nobility (give the order of nobility) to which I have heretofore belonged.

Waivers
The requirement to take and subscribe to the Oath of Allegiance of the United States is waived for children under 14 years of age at the time of naturalization. The requirement may also be waived for any person unable to understand or communicate an understanding of said Oath due to a physical disability or mental impairment.

History
During the Revolutionary War, oaths of allegiance were administered to officers of the Continental Army, pursuant to a Congressional resolution of February 3, 1778. An example appears below.

I James Glentworth, Lieut, of 6th Pennya. Reg. do acknowledge
the UNITED STATES of AMERICA to be Free, Independent
and Sovereign States, and declare that the people thereof owe no
allegiance or obedience to George the Third, King of Great
Britain; and I renounce, refuse and abjure any allegiance or 
obedience to him; and I do Swear that I will, to the utmost of my
power, support, maintain and defend the said United States against
the said King George the Third, his heirs and successors, and his
or their abettors, assistants and adherents, and will serve the said
United States in the office of Lieutenant which I now hold, with
fidelity, according to the best of my skill and understanding.
JAMES GLENTWORTH.
Sworn at the Valley Forge Camp this 11th day of May, 1778, before me

STIRLING, M. G.
The Oath of Allegiance for prospective citizens originated with the Naturalization Act of 1790, which required applicants to take an oath or affirmation "to support the constitution of the United States", but did not provide a text. The Naturalization Act of 1795 added renunciation of the new citizen's former sovereign to the oath.  The Naturalization Act of 1906 added the section of the oath requiring new citizens to defend the Constitution and laws of the United States of America against all enemies, foreign and domestic; and bear true faith and allegiance to the same.
Known as the "Old Law" Era (1790 - 1906), this period had no official document or "oath" as is the case today. The process of naturalization, thus, was a process that was taken up by an individual and a local court, of which thousands existed throughout the states at the time. With intercontinental travel being limited at the time, along with the United States being a relatively young country, the list of incoming nationalities was very short. This gave no need to have an extensive process for naturalization.
It wasn't until the early twentieth century, which saw a large increase in immigrants to the U.S. until a formal application was created. Congress enacted the Basic Naturalization Act of 1906 which saw the first filed form for naturalization in the U.S. and was the first time that the Federal government oversaw the process. Form 2207 would be the first form of identification that would go along with the process of naturalization, which was updated progressively as technology like photographs were more accessible.
But even with these changes, the Certificate of Naturalization still lacked an actual "oath". Incoming citizens prior to 1906 would be deemed worthy only by the opinion of their judges. It wasn't until 1929 that a written "pledge" of sorts was added to the application, and not until 1950 that the addition of bearing arms for the U.S. was officially added. 
The Oath acquired a standard text in 1929. Prior to then, spoken oaths were adapted from naturalization law, and each court could develop its own procedures for administering the oath.
The Internal Security Act of 1950 added the text about bearing arms and performing noncombatant service in the armed forces of the United States.  The section about performing work of national importance under civilian direction was added by the Immigration and Nationality Act of 1952.

Proposed changes
The current text of the Oath of Citizenship is established only in the form of an administrative regulation promulgated by the executive branch.  Under the Administrative Procedure Act, CIS could theoretically change the text of the oath at any time, so long as the new text reasonably meets the "five principles" mandated by the Immigration and Nationality Act of 1953. These principles are:-

allegiance to the United States Constitution,
renunciation of allegiance to any foreign country to which the immigrant has had previous allegiances
defense of the Constitution against enemies "foreign and domestic"
promise to serve in the United States Armed Forces when required by law (either combat or non-combat)
promise to perform civilian duties of "national importance" when required by law
In the fall of 2003, CIS planned to change the oath of citizenship in time for Constitution Day and Citizenship Day (September 17). The proposed oath was as follows:

Solemnly, freely, and without mental reservation, I hereby renounce under oath all allegiance to any foreign state. My fidelity and allegiance from this day forward is to the United States of America. I pledge to support, honor, and be loyal to the United States, its Constitution, and its laws. Where and if lawfully required, I further commit myself to defend the Constitution and laws of the United States against all enemies, foreign and domestic, either by military, noncombatant, or civilian service. This I do solemnly swear, so help me God.
The introduction of the new oath was scrapped by the U.S. House of Representatives Judiciary Subcommittee on Immigration, Border Security, and Claims on April 1, 2004.

Objections and legal developments
In United States v. Schwimmer (1929), the U.S. Supreme Court upheld the denial of citizenship to an applicant who declared not to be willing to "take up arms personally" in defense of the United States. The applicant, Hungarian-born female suffragist Rosika Schwimmer, had written that she was an "uncompromising pacifist" with "no sense of nationalism, only a cosmic consciousness of belonging to the human family". The Court found that persons holding such views were "liable to be incapable of the attachment for and devotion to the principles of our Constitution" that are required for naturalization.
English writer Aldous Huxley, author of Brave New World, applied for U.S. citizenship in 1953 after having lived in the United States for fourteen years. When asked if he would bear arms and perform noncombatant military service as required by the Oath, Huxley answered in the negative and was summoned before a judge. Huxley explained that his objection was based on philosophical convictions about the evil of war rather than religious beliefs. The judge adjourned proceedings and postponed a decision on Huxley's application in order to report to Washington. Huxley never received U.S. citizenship.
In the 1968 case In re Weitzman, a U.S. district court considered the naturalization petition of Brenda Weitzman, a 25-year-old mother of two children from South Africa and religious non-believer who had refused to take the part of the Oath requiring her to serve in the Armed Forces.  She expressed a total "objection to warfare and the bearing of arms" (conscientious objectorship), being "repulsed by no particular war, but by all killing."  The court, finding that her stance was "based on a personal moral code and not on religious training and belief" and that she did not recognize anything "tantamount to a God or a Supreme Being", denied her petition.
The precedent relied upon was United States v. Seeger (1965). In Welsh v. United States (1970),  the Supreme Court, having noted the case factually similar and controlled by United States v. Seeger, determined in respect to the provision in the Universal Military Training and Service Act that exempts from military service persons who by reason of "religious training and belief" are conscientiously opposed to war, that the Act:

contravenes the Establishment Clause of the First Amendment by exempting those whose conscientious objection claims are founded on a theistic belief, while not exempting those whose claims are based on a secular belief. To comport with that clause, an exemption must be "neutral" and include those whose belief emanates from a purely moral, ethical, or philosophical source.
This judgement was used in 2013 to reverse a denial of citizenship to Margaret Doughty, a 65-year-old British atheist who had lived in the United States for 30 years, unless she could show proof of membership in a church with pacifist beliefs to support her claim that she was a conscientious objector entitled to omit the Oath's clause about bearing arms. United States Citizenship and Immigration Services retracted their demand after receiving letters from the Freedom From Religion Foundation and the American Humanist Association that objected based on Welsh v. United States.

See also
Ideological restrictions on naturalization in U.S. law
Oath of office (United States)
Pledge of Allegiance (United States)

Notes
References
External links
 Media related to Oath of Allegiance (United States) at Wikimedia Commons